#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.dirname(__FILE__) + "/../lib")

require 'optparse'
require 'rubygems'
require 'treetop'
require 'logic_parser'
require 'logic_operations'

options = {}
 
optparse = OptionParser.new do|opts|
  opts.banner = "Usage: logic [options] <decision>"
 
  opts.on( '-m', '--mcdc_pairs', 'Show MC/DC test case pairs' ) do
    options[:mcdc_pairs] = true
  end
  
  opts.on( '-l', '--truth_table', 'Show the truth table for the decision' ) do
    options[:truth_table] = true
  end
  
  opts.on( '-h', '--help', 'You\'re looking at it' ) do
    options[:help] = true
  end
end

optparse.parse!

if options[:help] or ARGV.length == 0
  puts optparse.help
  exit
end

parser = LogicParser.new
decision = parser.parse ARGV.join(' ')

puts decision.truth_table if options[:truth_table]
puts decision.mcdc_pairs  if options[:mcdc_pairs]
